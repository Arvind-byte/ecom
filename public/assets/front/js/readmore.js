!function(e){function t(e){var t=e.data("dReadmore").target,a=t.data("dReadmore").btn,r=parseFloat(t.css("min-height"))*parseFloat(t.css("line-height"))/parseFloat(t.css("font-size")),d=parseFloat(t.find(".r-readmove_text-wrapp").css("height"))/parseFloat(t.css("font-size"));t.data("dReadmore").closeIfChangeWidth&&t.attr("r-readmore-expanded",t.data("dReadmore").expanded),"true"===t.attr("r-readmore-expanded")?a.html(e.data("dReadmore").lessText):a.html(e.data("dReadmore").moreText),parseFloat(t.css("min-height"))?(t.css({height:("true"===t.attr("r-readmore-expanded")?d:r)+"em","min-height":"none"}),a.css({display:""})):(t.css({height:"","min-height":""}),a.css({display:"none"})),e.data("dReadmore").heightMin=r,e.data("dReadmore").heightMax=d}function a(a){a.attr("id",a.data("dReadmore").id),t(a),a.data("dReadmore").btn.on("click",function(){a.off("transitionend");var t=e("#"+a.data("dReadmore").id),r="true"===t.attr("r-readmore-expanded");a.data("dReadmore").beforeToggle&&"function"==typeof a.data("dReadmore").beforeToggle&&a.data("dReadmore").beforeToggle(a,r),r?(t.attr("r-readmore-expanded",!1).css({height:a.data("dReadmore").heightMin+"em"}),e(this).html(a.data("dReadmore").moreText)):(t.attr("r-readmore-expanded",!0).css({height:a.data("dReadmore").heightMax+"em"}),e(this).html(a.data("dReadmore").lessText)),a.on("transitionend",function(){a.data("dReadmore").afterToggle&&"function"==typeof a.data("dReadmore").afterToggle&&a.data("dReadmore").afterToggle(a,!r),a.off("transitionend")})}),e(window).on("load resize",function(){var e,r,d;e=a,r=parseFloat(e.css("min-height"))*parseFloat(e.css("line-height"))/parseFloat(e.css("font-size")),d=parseFloat(e.find(".r-readmove_text-wrapp").css("height")),e.data("dReadmore").heightMin==r&&e.data("dReadmore").heightMax==d||t(e)})}var r={init:function(t){return this.each(function(r){var d={id:"r-readmore-"+r,startOpen:!1,moreText:"read more...",lessText:"read less",duration:250,timing:"ease",returnInitialState:!1,beforeToggle:function(){},afterToggle:function(){}};t&&e.extend(d,t);var o=e(this),i=o.parent().find(".r-readmore_btn").attr("r-readmore-controls-id",d.id);o.data("dReadmore",{target:o,id:d.id,btn:i,expanded:d.startOpen,moreText:d.moreText,lessText:d.lessText,duration:d.duration,closeIfChangeWidth:d.closeIfChangeWidth,heightMin:0,heightMax:0,beforeToggle:d.beforeToggle,afterToggle:d.afterToggle}).css({"transition-property":"height, min-height","transition-duration":d.duration+"ms","transition-timing-function":d.timing}).wrapInner('<div class="r-readmove_text-wrapp"></div>'),a(o)})},destroy:function(){return this.each(function(){var t=e(this);t.parent().find("."+t.data("dReadmore").btnClass).removeAttr("r-readmore-controls-id").unbind("click"),t.removeData("dReadmore"),t.css({height:"","transition-property":"","transition-duration":"","transition-timing-function":""}).removeAttr("id").removeAttr("r-readmore-expanded").html(t.find(".r-readmove_text-wrapp").html())})}};e.fn.dReadmore=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("The method named "+t+" does not exist for dReadmore"):r.init.apply(this,arguments)}}(jQuery);